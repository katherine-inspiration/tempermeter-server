(this.webpackJsonptempermeter=this.webpackJsonptempermeter||[]).push([[0],{36:function(e,n,t){e.exports=t(50)},41:function(e,n,t){},42:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),c=t(18),a=t.n(c),i=(t(41),t(42),t(3)),u=t(4);function s(){var e=Object(i.a)(["\n    background-color: white;\n    padding: 0px;\n    width: 100%;\n    display:block;\n    height: 100px;\n    box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.5);\n"]);return s=function(){return e},e}var l=u.a.header(s());function d(){var e=Object(i.a)(["\n    width: 150px;\n    height: 150px;\n    position:absolute;\n    top: -30px;\n    left: 20px;\n"]);return d=function(){return e},e}var f=u.a.img(d()),p=t(31);function b(){var e=Object(i.a)(["\n    font-size: 30px;\n    color: ",";\n    position: absolute;\n    top: 30px;\n    right: 40px;\n    \n    :hover{\n        cursor: pointer;\n    }\n"]);return b=function(){return e},e}var m=Object(u.a)(p.a)(b(),(function(e){return e.secondary?"#FD759C":"#2E753E"})),h=t(33);function g(){var e=Object(i.a)(["\n    width: 1000px;\n    margin: 20px auto;\n    background-color: white;\n    padding: 20px;\n    display: block;\n    text-align: center;\n    border: 1px pink solid;\n"]);return g=function(){return e},e}var E=u.a.section(g()),O=t(5),j=t(35),v=t(11);function _(){var e=Object(i.a)(["\n    padding: 18px 60px;\n    background-color: ",";\n    color: ",";\n    border: 1px "," solid;\n    display: inline-block;\n    font-size:20px;\n    text-decoration: none;\n    :hover{\n        cursor:pointer;\n    }\n    :active{\n        box-shadow: 0 0 6px 0 rgba(0, 0, 0, 0.5);\n    }\n"]);return _=function(){return e},e}var w=u.a.button(_(),(function(e){return e.primary?"#2E753E":e.secondary?"#FD759C":"white"}),(function(e){return e.primary||e.secondary?"white":"#2E753E"}),(function(e){return e.secondary?"#FD759C":"#2E753E"}));function y(){var e=Object(i.a)(["\n    color: ",";\n    font-size: 30px;\n    font-weight: bold;\n\n"]);return y=function(){return e},e}var x=u.a.h1(y(),(function(e){return e.secondary?"#FD759C":"#2E753E"})),S=t(6);function I(){var e=Object(i.a)(["\n    \n    border:1px "," solid;\n    padding: 20px 40px;\n    font-size: 17px;\n    border-radius: 15px;\n    display: inline-block;\n    margin: 10px auto;\n    .date{\n        color: '#4d4d4d';\n        font-style: italic;\n    }\n    .result_name{\n        font-weight:bold;\n    }\n    :hover{\n        background-color: ",";\n        color: white;\n        cursor: pointer;\n    }\n"]);return I=function(){return e},e}var k=Object(u.a)((function(e){console.log(e);var n=new Date(e.date).toLocaleTimeString("ru-RU",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return o.a.createElement("div",null,o.a.createElement("div",{className:e.className},o.a.createElement("span",{className:"date"},n),o.a.createElement("br",null),o.a.createElement("span",{className:"result_name"},e.result_name)))}))(I(),(function(e){return e.primary?"#2E753E":"#FD759C"}),(function(e){return e.primary?"#2E753E":"#FD759C"})),q=k;function D(){var e=Object(i.a)(["\n    border: 1px "," solid;\n    background-color: ",";\n    color: ",";\n    font-size: 18px;\n    border-radius: 15px;\n    padding: 20px;\n    \n"]);return D=function(){return e},e}var T=u.a.p(D(),(function(e){return e.secondary?"#FD759C":"#2E753E"}),(function(e){return e.primary?"#2E753E":e.secondary&&e.bold?"#FD759C":"white"}),(function(e){return e.primary||e.secondary&&e.bold?"white":"#4d4d4d"}));function C(){var e=Object(i.a)(["\n    width: 150px;\n    display: inline-block;\n    \n"]);return C=function(){return e},e}var N=Object(u.a)((function(e){return o.a.createElement("div",null,o.a.createElement("img",Object.assign({className:e.className},e,{src:"/images/preloader.svg"})))}))(C()),U=function(e){var n=Object(r.useState)(!1),t=Object(S.a)(n,2),c=t[0],a=t[1],i=Object(r.useState)(!1),u=Object(S.a)(i,2),s=u[0],l=u[1],d=Object(r.useState)([]),f=Object(S.a)(d,2),p=f[0],b=f[1];c||(l(!0),console.log("fetching /api/history/results/"+e.user_id),fetch("/api/history/results/"+e.user_id).then((function(e){return e.json()})).then((function(n){return console.log("result"),console.log(n),n&&e.updateResultsHistory(n),a(!0),l(!1),b(n),n})).catch((function(e){return console.log(e)})),a(!0));var m=e.resultsHistory.length>0?p.map((function(e){return o.a.createElement(q,Object.assign({},e,{key:e.session_id}))})):o.a.createElement(T,null,"\u0412\u0430\u0448\u0430 \u0438\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u0443\u0441\u0442\u0430. \u0412\u044b \u0435\u0449\u0435 \u043d\u0438 \u0440\u0430\u0437\u0443 \u043d\u0435 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u043b\u0438 \u0442\u0435\u0441\u0442.");return o.a.createElement("div",null,s?o.a.createElement(N,null):m)};function A(){var e=Object(i.a)(["\n"]);return A=function(){return e},e}var F=Object(u.a)(U)(A()),H=t(34),R=[],P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,n=arguments.length>1?arguments[1]:void 0;Object(H.a)(e);switch(n.type){case"UPDATE-RESULTS-HISTORY":return n.newState;default:return e}},z=Object(v.b)((function(e){return{user_id:e.userInfo.user_id,resultsHistory:e.resultsHistory}}),(function(e){return{updateResultsHistory:function(n){e(function(e){return{type:"UPDATE-RESULTS-HISTORY",newState:e}}(n))}}}))(F),Q=t(14),L=function(e){return o.a.createElement("div",null,o.a.createElement(w,{primary:!0,as:Q.b,to:"/test/1",onClick:function(){fetch("/api/session/start/"+e.user_id).then((function(e){return console.log(e),e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}},"\u041f\u0440\u043e\u0439\u0442\u0438 \u0442\u0435\u0441\u0442"),o.a.createElement(x,{secondary:!0},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"),o.a.createElement(z,{user_id:e.user_id}))},B={user_id:"1"},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"UPDATE-USER-INFO":return n.userInfo;default:return e}},W=function(e){return{type:"UPDATE-USER-INFO",userInfo:{user_id:e.user_id}}},Y=Object(v.b)((function(e){return Object(j.a)({},e.userInfo)}),(function(e){return{updateUserInfo:function(n){e(W(n))}}}))(L),G=function(e){return o.a.createElement(T,{primary:!0},e.question_text)};function M(){var e=Object(i.a)(["\n    :hover{\n        cursor:pointer;\n    }\n    \n"]);return M=function(){return e},e}var $=function(e){var n=Object(r.useState)(!1),t=Object(S.a)(n,2),c=t[0],a=t[1];return Object(r.useEffect)((function(){a(e.chosen),console.log(e.chosen)}),[e.chosen]),o.a.createElement(T,{secondary:!0,bold:c,className:e.className,onClick:e.onClick},e.answer_text)},K=$=Object(u.a)($)(M());function V(){var e=Object(i.a)(["\n\n"]);return V=function(){return e},e}var X=function(e){var n=Object(r.useState)([]),t=Object(S.a)(n,2),c=t[0],a=t[1],i=Object(r.useState)(!0),u=Object(S.a)(i,2),s=u[0],l=u[1],d=Object(r.useState)(null),f=Object(S.a)(d,2),p=f[0],b=f[1],m=Object(r.useState)(null),h=Object(S.a)(m,2),g=(h[0],h[1]);Object(r.useEffect)((function(){E(e.question_id)}),[e.question_id]),Object(r.useEffect)((function(){g(e.chosenAnswerId)}),[e.chosenAnswerId]),Object(r.useEffect)((function(){b(c?c.map((function(n){return o.a.createElement(K,{answer_id:n.answer_id,answer_text:n.answer_text,onClick:function(t){e.answerChoiceHandler(n.answer_id),console.log(n.answer_id)},chosen:n.answer_id===+e.chosenAnswerId})})):null)}),[c]);var E=function(n){return console.log("props"),console.log(e),console.log("Fetching answers for question "+n),n?fetch("/api/answers/"+n).then((function(e){return console.log(e),e.json()})).then((function(e){return console.log(e),a(e),l(!1),e})).catch((function(e){return console.log(e)})):[]};return o.a.createElement("div",null,s?o.a.createElement(N,null):p)},Z=X=Object(u.a)(X)(V()),ee=function(e){var n=Object(r.useState)(!1),t=Object(S.a)(n,2),c=t[0],a=t[1],i=Object(r.useState)(null),u=Object(S.a)(i,2),s=(u[0],u[1]),l=Object(r.useState)(!1),d=Object(S.a)(l,2),f=(d[0],d[1],Object(r.useState)([])),p=Object(S.a)(f,2),b=p[0],m=p[1],h=Object(r.useState)(!1),g=Object(S.a)(h,2),E=g[0],O=g[1],j=Object(r.useState)(0),v=Object(S.a)(j,2),_=v[0],y=v[1],x=Object(r.useState)(null),I=Object(S.a)(x,2),k=I[0],q=I[1];Object(r.useEffect)((function(){s(e.session_id)}),[e.session_id]),c||(O(!0),console.log("/api/session/"+e.user_id),fetch("/api/session/"+e.user_id).then((function(e){return e.json()})).then((function(n){return console.log(n),n&&e.updateSessionId(n.session_id),O(!1),n.session_id})).catch((function(e){return console.log(e)})),O(!0),console.log("Getting questions"),fetch("/api/questions").then((function(e){return console.log(e),e.json()})).then((function(n){return console.log("questions result"),console.log(n),n&&(e.updateQuestions(n),m(n)),O(!1),n})).catch((function(e){return console.log(e)})),a(!0));var D=b.map((function(n){return o.a.createElement(G,{primary:!0,session_id:e.session_id,question_id:n.question_id,question_text:n.question_text,questions_picture:n.question_picture})}));return o.a.createElement("div",null,E?o.a.createElement(N,null):D[_],o.a.createElement(Z,{question_id:b.length>0?b[_].question_id:"",answerChoiceHandler:function(e){q(e)},chosenAnswerId:k}),E?null:o.a.createElement("div",null,o.a.createElement(w,{onClick:function(){b&&_>0&&(y(_-1),q(null))}},"\u041d\u0430\u0437\u0430\u0434"),o.a.createElement(w,{primary:_===b.length-1,onClick:function(){b&&_<b.length-1&&(y(_+1),q(null))}},_===b.length-1?"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0442\u0435\u0441\u0442":"\u0412\u043f\u0435\u0440\u0435\u0434")))},ne={session_id:null},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"UPDATE-SESSION-ID":return{session_id:n.session_id};default:return e}},re=function(e){return{type:"UPDATE-SESSION-ID",session_id:e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"UPDATE-QUESTIONS":return n.questions;default:return e}},ce=function(e){return{type:"UPDATE-QUESTIONS",questions:e}},ae=Object(v.b)((function(e){return{session_id:e.sessionInfo.session_id,user_id:e.userInfo.user_id}}),(function(e){return{updateSessionId:function(n){e(re(n))},updateQuestions:function(n){e(ce(n))}}}))(ee);function ie(){var e=Object(i.a)(["\n    width:100%;\n"]);return ie=function(){return e},e}Object(u.a)((function(e){return o.a.createElement("img",{className:e.className,src:"/images/Tempermeter_loader.svg"})}))(ie());var ue=function(){return o.a.createElement("div",null,o.a.createElement(l,null,o.a.createElement(f,{src:"images/Tempermeter-logo.svg",alt:"Tempermeter logo"}),o.a.createElement(m,{icon:h.a})),o.a.createElement(E,null,o.a.createElement(O.c,null,o.a.createElement(O.a,{path:"/home",render:function(){return o.a.createElement(Y,null)}}),o.a.createElement(O.a,{path:"/test/:question_id",render:function(){return o.a.createElement(ae,null)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=t(16),le=Object(se.b)({resultsHistory:P,userInfo:J,sessionInfo:te,questions:oe}),de=Object(se.c)(le);a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Q.a,null,o.a.createElement(v.a,{store:de},o.a.createElement(ue,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.f94234d6.chunk.js.map